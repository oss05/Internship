{"version":3,"file":"dbox.js","sources":["../../../dboxjs/core/lib/carto/carto.js","../../../dboxjs/core/lib/helper.js","../../../dboxjs/core/lib/chart.js","../../../dboxjs/layer-scaffold/layer.js","../../../dboxjs/core/index.dev.js"],"sourcesContent":["/*\n * CartoDB helper function\n */\n\nimport * as cartodb from \"cartodb\";\nexport default function carto() {\n\n  function carto(){\n\n  }\n\n  carto.query = function(config, callback){\n    //Config the cartdb User\n    var sql = new cartodb.SQL({ user: config.cartodb.user });\n    //Execute the query\n    sql.execute(config.cartodb.sql)\n      .done(function(data){\n\n        var result = data.rows;\n        //parse the data\n        if( config.parser ){\n          result = data.rows.map(config.parser)\n        }\n        //execute the callback with no error\n        callback(null, result);\n      })\n      .error(function(error){\n        //Return the error\n        callback(error, null);\n      })\n  }\n\n  return carto;\n}\n","import * as d3 from 'd3';\n\nexport default function () {\n  var vm = this; // Hard binded to chart\n\n  var Helper = {\n    chart: {\n      config: vm._config,\n      width: vm._width,\n      height: vm._height,\n      style: vm._addStyle,\n      fullSvg: function () {\n        return vm._fullSvg;\n      },\n      svg: function () {\n        return vm._svg;\n      },\n    },\n    utils: {\n      d3: {}\n    }\n  };\n\n  Helper.utils.d3.tip = d3.tip;\n\n  Helper.utils.generateScale = function (data, config) {\n    var scale = {};\n    var domains;\n    if (!config.range) {\n      throw 'Range is not defined';\n    }\n    // Used in bars.js when we want to create a groupBy or stackBy bar chart\n    if (config.groupBy && config.groupBy == 'parent') {\n      // Axis of type band \n      domains = data.map(function (d) {\n        return d[config.column];\n      });\n    } else if (config.stackBy && config.stackBy == 'parent') {\n      domains = data[0].map(function (d) {\n        return d.data[config.column];\n      });\n    } else if (config.groupBy == 'children') {\n      // GroupBy Columns\n      domains = config.column;\n    } else if (config.groupBy == 'data') {\n      // Considering the highest value on all the columns for each groupBy column\n      domains = [0, d3.max(data, function (d) {\n        return d3.max(config.column, function (column) {\n          return d[column];\n        });\n      })];\n    } else if (config.stackBy == 'data') {\n      // Using a d3.stack() \n      domains = [0, d3.max(data, function (serie) {\n        return d3.max(serie, function (d) {\n          return d[1];\n        });\n      })];\n    } else if (config.groupBy == undefined && config.type == 'band') {\n      // In case the axis is of type band and there is no groupby\n      domains = data.map(function (d) {\n        return d[config.column];\n      });\n    } else if (config.type === 'linear') {\n      // Axis of type numeric\n      domains = d3.extent(data, function (d) {\n        return +d[config.column];\n      });\n    } else {\n      // Axis of type band\n      domains = data.map(function (d) {\n        return d[config.column];\n      });\n    }\n\n    if (config.minZero) {\n      domains = [0, d3.max(data, function (d) {\n        return +d[config.column];\n      })];\n    }\n    if (config.domains && Array.isArray(config.domains)) {\n      domains = config.domains;\n    }\n\n    if (config.type) {\n      switch (config.type) {\n      case 'linear':\n        scale = d3.scaleLinear()\n          .rangeRound(config.range)\n          .domain(domains);\n        break;\n\n      case 'time':\n        scale = d3.scaleTime()\n          .range(config.range);\n        // .domain(domains);\n        break;\n\n      case 'ordinal':\n        scale = d3.scaleBand()\n          .rangeRound(config.range)\n          .padding(0.1)\n          .domain(domains);\n        break;\n\n      case 'band':\n        scale = d3.scaleBand()\n          .rangeRound(config.range)\n          .domain(domains)\n          .padding(0.1);\n        break;\n\n      case 'quantile':\n        scale = d3.scaleBand()\n          .rangeRound(config.range)\n          .padding(0.1)\n          .domain(data.map(function (d) {\n            return d[config.column];\n          }));\n        if (!config.bins) {\n          config.bins = 10;\n        }\n        scale = d3.scaleQuantile()\n          .range(d3.range(config.bins));\n        break;\n\n      default:\n        scale = d3.scaleLinear()\n          .rangeRound(config.range)\n          .domain(domains);\n        break;\n      }\n    } else {\n      scale = d3.scaleLinear()\n        .rangeRound(config.range)\n        .domain(domains);\n    }\n\n    return scale;\n  };\n\n  Helper.utils.format = function (d) {\n    var value = '';\n    if (vm._config.formatPreffix) {\n      value += vm._config.formatPreffix;\n    }\n    if (d === 0 || d % 1 == 0) {\n      value += d3.format(',.0f')(d);\n    } else if (d < 1 && d > 0) {\n      value += d3.format(',.2f')(d);\n    } else {\n      value += d3.format(',.1f')(d);\n    }\n    if (vm._config.formatSuffix) {\n      value += vm._config.formatSuffix;\n    }\n    return value;\n  };\n\n  // wrap function used in x axis labels\n  Helper.utils.wrap = function (text, width, tooltip) {\n    text.each(function () {\n      var text = d3.select(this),\n        words = text.text().split(/\\s+/).reverse(),\n        word,\n        line = [],\n        lineNumber = 0,\n        lineHeight = 1.1, // ems\n        y = text.attr('y'),\n        dy = parseFloat(text.attr('dy')) || 0,\n        tspan = text.text(null).append('tspan').attr('x', 0).attr('y', y).attr('dy', dy + 'em');\n\n      while (word = words.pop()) {\n        line.push(word);\n        tspan.text(line.join(' '));\n        if (tspan.node().getComputedTextLength() > width) {\n          line.pop();\n          tspan.text(line.join(' '));\n          line = [word];\n          tspan = text.append('tspan').attr('x', 0).attr('y', y).attr('dy', ++lineNumber * lineHeight + dy + 'em').text(word);\n\n          if (lineNumber > 0) {\n            if (words.length > 0 && tspan.node().getComputedTextLength() > width) {\n              if (tooltip) {\n                text\n                  .on('mouseover', tooltip.show)\n                  .on('mouseout', tooltip.hide);\n              }\n              let i = 1;\n              while (tspan.node().getComputedTextLength() > width) {\n                tspan.text(function () {\n                  return tspan.text().slice(0, -i) + '...';\n                });\n                ++i;\n              }\n            }\n            words = [];\n          } else {\n            let i = 1;\n            while (tspan.node().getComputedTextLength() > width) {\n              tspan.text(function () {\n                return tspan.text().slice(0, -i) + '...';\n              });\n              ++i;\n            }\n          }\n        }\n      }\n    });\n  };\n\n  Helper.utils.sortAscending = function (a, b) {\n    if (!Number.isNaN(+a) && !Number.isNaN(+b)) {\n      // If both values are numbers use numeric value\n      return Number(a) - Number(b);\n    } else if (!Number.isNaN(+a) && Number.isNaN(+b)) {\n      return -1;\n    } else if (Number.isNaN(+a) && !Number.isNaN(+b)) {\n      return 1;\n    } else if (a <= b) {\n      return -1;\n    } else {\n      return 1;\n    }\n  };\n\n  Helper.utils.sortDescending = function (a, b) {\n    if (!Number.isNaN(+b) && !Number.isNaN(+a)) {\n      // If both values are numbers use numeric value\n      return Number(b) - Number(a);\n    } else if (!Number.isNaN(+b) && Number.isNaN(+a)) {\n      return -1;\n    } else if (Number.isNaN(+b) && !Number.isNaN(+a)) {\n      return 1;\n    } else if (b <= a) {\n      return -1;\n    } else {\n      return 1;\n    }\n  };\n\n  return Helper;\n}\n","import * as d3 from 'd3';\nimport * as _ from 'lodash';\n\nimport carto from './carto/carto';\nimport Helper from './helper';\n\n/**\n * Dbox Chart core\n */\nexport default function (config) {\n  const Chart = {};\n\n  Chart.init = function (config) {\n    const vm = this;\n\n    const defaultConfig = {\n      size: {\n        width: 800,\n        height: 600,\n        margin: {\n          left: 0,\n          right: 0,\n          top: 0,\n          bottom: 0,\n        },\n      },\n    };\n\n    const defaultStyle = {\n      chart: {\n        backgroundColor: {\n          color: 'transparent',\n          // linearGradient : { x1: 0, y1: 0, x2: 1, y2: 1 },\n          // stops: [ [0, '#FCFCFC'], [1, '#F3F2F2'] ]\n        },\n      },\n      title: {\n        textColor: '#E6B537',\n        fontSize: '30px',\n        fontWeight: 600,\n        textAlign: 'center',\n        hr: {\n          enabled: true,\n          borderWidth: '1px',\n          borderColor: '#fff',\n        },\n      },\n      legend: {\n        position: 'bottom',\n        figure: 'circle',\n        text: {\n          textColor: '#fff',\n          fontSize: '20px',\n          fontWeight: 600,\n        },\n      },\n      tooltip: {\n        backgroundColor: '#757575',\n        opacity: 0.9,\n        text: {\n          textColor: '#fff',\n          fontSize: '12px',\n          fontWeight: 600,\n          textAlign: 'center',\n          fontFamily: 'sans-serif',\n          padding: '0.8em',\n        },\n        border: {\n          color: '#5A5C5D',\n          radius: '5px',\n          width: '1px',\n        },\n      },\n      yAxis: {\n        enabled: true,\n        axis: {\n          strokeWidth: 3,\n          strokeColor: '#5F6C6C',\n          strokeOpacity: 0,\n          paddingTick: 0,\n        },\n        ticks: {\n          strokeWidth: 3,\n          strokeColor: '#929D9E',\n          grid: 'dashed',\n          gridDashed: '3, 5',\n          opacity: 0.6,\n        },\n        labels: {\n          fontSize: 12,\n          fontWeight: 600,\n          textColor: '#fff',\n          textAnchor: 'end',\n        },\n        title: {\n          fontSize: 17,\n          fontWeight: 600,\n          textColor: '#fff',\n          textAnchor: 'middle',\n          // rotation\n          // text align or position\n        },\n      },\n      xAxis: {\n        enabled: true,\n        axis: {\n          strokeWidth: 3,\n          strokeColor: '#5F6C6C',\n          strokeOpacity: 1,\n          paddingTick: 5,\n        },\n        ticks: {\n          strokeWidth: 1,\n          strokeColor: '#5F6C6C',\n          // ticksize\n        },\n        labels: {\n          fontSize: 12,\n          fontWeight: 400,\n          textColor: '#fff',\n          textAnchor: 'middle',\n        },\n        title: {\n          fontSize: 17,\n          fontWeight: 600,\n          textColor: '#fff',\n          textAnchor: 'middle',\n          // text align\n        },\n      },\n    };\n\n    vm._config = config ? _.cloneDeep(config) : defaultConfig;\n\n\n    vm._data = [];\n    vm._margin = vm._config.size.margin;\n    vm._addStyle = config.addStyle ? config.addStyle : defaultStyle;\n\n    // Define width and height\n    vm._width = vm._config.size.width - vm._margin.left - vm._margin.right;\n    vm._height = vm._config.size.height - vm._margin.top - vm._margin.bottom;\n    vm._svg = '';\n    vm._scales = {};\n    vm._axes = {};\n\n    // Public\n    vm.layers = [];\n\n    // Helper data/functions for layers to use\n    vm.helper = Helper.bind(vm)();\n  };\n\n  //------------------------\n  //User\n  Chart.config = function (config) {\n    const vm = this;\n    vm._config = _.cloneDeep(config);\n    return vm;\n  };\n\n  Chart.size = function (sizeObj) {\n    const vm = this;\n    if (sizeObj) {\n      if (sizeObj.margin) {\n        if (sizeObj.margin.left == Number(sizeObj.margin.left)) {\n          vm._config.size.margin.left = sizeObj.margin.left;\n          vm._margin.left = sizeObj.margin.left;\n        }\n        if (sizeObj.margin.right == Number(sizeObj.margin.right)) {\n          vm._config.size.margin.right = sizeObj.margin.right;\n          vm._margin.right = sizeObj.margin.right;\n        }\n        if (sizeObj.margin.top == Number(sizeObj.margin.top)) {\n          vm._config.size.margin.top = sizeObj.margin.top;\n          vm._margin.top = sizeObj.margin.top;\n        }\n        if (sizeObj.margin.bottom == Number(sizeObj.margin.bottom)) {\n          vm._config.size.margin.bottom = sizeObj.margin.bottom;\n          vm._margin.bottom = sizeObj.margin.bottom;\n        }\n      }\n      if (sizeObj.width == Number(sizeObj.width)) {\n        vm._config.size.width = sizeObj.width;\n        vm._width = sizeObj.width;\n      }\n      if (sizeObj.height == Number(sizeObj.height)) {\n        vm._config.size.height = sizeObj.height;\n        vm._height = sizeObj.height;\n      }\n    }\n    return vm;\n  };\n\n  Chart.addStyle = function (stylesObj) {\n    const vm = this;\n    if (stylesObj) {\n      vm._addStyle = stylesObj;\n    }\n    return vm;\n  };\n\n  Chart.grid = function (bool) {\n    const vm = this;\n    vm._config.grid = bool ? true : false;\n    return vm;\n  };\n\n  Chart.bindTo = function (selector) {\n    const vm = this;\n    vm._config.bindTo = selector;\n    return vm;\n  };\n\n  Chart.data = function (data) {\n    const vm = this;\n    if (vm._config.data !== undefined) {\n      vm._config.data = Object.assign({}, vm._config.data, data);\n    } else {\n      vm._config.data = data;\n    }\n    return vm;\n  };\n\n  Chart.legend = function (legend) {\n    const vm = this;\n    vm._config.legend = legend;\n    return vm;\n  };\n\n  Chart.legendType = function (legendType) {\n    const vm = this;\n    vm._config.legendType = legendType;\n    return vm;\n  };\n\n  Chart.legendTitle = function (legendTitle) {\n    const vm = this;\n    vm._config.legendTitle = legendTitle;\n    return vm;\n  };\n\n  Chart.layer = function (_layer, _config) {\n    const vm = this;\n    var layer;\n    var config = _config ? _config : vm._config;\n    if (_layer === undefined && _layer === null) {\n      //@Todo Throw Error\n    } else {\n      layer = _layer(config, vm.helper);\n      vm.layers.push(layer);\n      return layer;\n    }\n  };\n\n  Chart.getLayer = function (layerIndex) {\n    const vm = this;\n    return vm.layers[layerIndex];\n  };\n\n  Chart.draw = function () {\n    const vm = this;\n    let q;\n\n    vm._scales = vm.scales();\n    //vm._axes   = vm.axes(); CALL THE AXES AFTER DATA LOADING IN ORDER TO UPDATE THE DOMAINS OF THE SCALES\n\n    q = vm.loadData();\n\n    q.awaitAll((error, results) => {\n      if (error) {\n        throw error;\n      }\n\n      if (Array.isArray(results) && results.length == 1) {\n        vm._data = results[0];\n      } else {\n        vm._data = results;\n      }\n\n      vm.initLayers();\n      vm.drawSVG();\n\n      //@TODO, ONE MAIN AXES THEN ADD THE POSSIBILITY FOR THE LAYER TO OVERRIDE \n      vm._axes = vm.axes();\n      vm.drawAxes();\n\n      //Draw layers after axes\n      vm.drawLayers();\n\n      //Trigger load chart event\n      if (vm._config.events && vm._config.events.load) {\n        vm.dispatch.on('load.chart', vm._config.events.load(vm));\n      }\n\n\n    });\n    return vm;\n  };\n\n  Chart.addStyle = function (theme) {\n    const vm = this;\n    vm._addStyle = theme;\n    return vm;\n  };\n\n  //----------------------\n  // Helper functions\n  Chart.scales = function () {\n    const vm = this;\n\n    var scales = {};\n    // xAxis scale\n    if (vm._config.xAxis && vm._config.xAxis.scale) {\n      switch (vm._config.xAxis.scale) {\n      case 'linear':\n        scales.x = d3.scaleLinear()\n            .range([0, vm._width]);\n        break;\n\n      case 'time':\n        scales.x = d3.scaleTime()\n          .range([0, vm._width]);\n        break;\n\n      case 'ordinal':\n        scales.x = d3.scaleOrdinal()\n          .range([0, vm._width], 0.1);\n        break;\n\n      case 'band':\n        scales.x = d3.scaleBand()\n          .rangeRound([0, vm._width])\n          .padding(0.1);\n        break;\n\n      case 'quantile':\n        scales.x = d3.scaleOrdinal()\n          .range([0, vm._width], 0.1);\n\n        scales.q = d3.scaleQuantile()\n          .range(d3.range(vm._config.xAxis.buckets));\n        break;\n\n      default:\n        scales.x = d3.scaleLinear()\n          .range([0, vm._width]);\n        break;\n      }\n    } else {\n      scales.x = d3.scaleLinear()\n        .range([0, vm._width]);\n    }\n\n    //yAxis scale\n    if (vm._config.yAxis && vm._config.yAxis.scale) {\n      switch (vm._config.yAxis.scale) {\n      case 'linear':\n        scales.y = d3.scaleLinear()\n          .range([vm._height, 0]);\n        break;\n\n      case 'time':\n        scales.y = d3.scaleTime()\n          .range([vm._height, 0]);\n        break;\n\n      case 'ordinal':\n        scales.y = d3.scaleOrdinal()\n          .range([vm._height, 0], 0.1);\n        break;\n\n      case 'band':\n        scales.y = d3.scaleBand()\n          .rangeRound([vm._height, 0])\n          .padding(0.1);\n        break;\n\n      case 'quantile':\n        scales.y = d3.scaleOrdinal()\n          .range([0, vm._width], 0.1);\n\n        scales.q = d3.scaleQuantile()\n          .range(d3.range(vm._config.yAxis.buckets));\n        break;\n\n      default:\n        scales.y = d3.scaleLinear()\n          .range([vm._height, 0]);\n        break;\n      }\n    } else {\n      scales.y = d3.scaleLinear()\n        .range([vm._height, 0]);\n    }\n\n\n    scales.color = d3.scaleOrdinal(d3.schemeCategory10);\n\n    return scales;\n  };\n\n  Chart.setScales = function () {\n\n  };\n\n  Chart.axes = function () {\n    const vm = this,\n      axes = {};\n    axes.x = d3.axisBottom(vm._scales.x);\n    axes.y = d3.axisLeft(vm._scales.y);\n\n    //remove corners in axis line\n    axes.x.tickSizeOuter(0);\n    axes.y.tickSizeOuter(0);\n\n    //Replaced with *addStyle -check\n    if (vm._config.xAxis && vm._config.xAxis.ticks &&\n      vm._config.xAxis.ticks.enabled === true && vm._config.xAxis.ticks.style) {\n\n      switch (vm._config.xAxis.ticks.style) {\n      case 'straightLine':\n        axes.x\n          .tickSize(-vm._height, 0);\n        break;\n      case 'dashLine':\n        axes.x\n          .tickSize(-vm._width, 0);\n        break;\n      }\n    }\n    //addStyle\n    if (vm._addStyle.xAxis.ticks.grid) {\n      switch (vm._addStyle.xAxis.ticks.grid) {\n      case 'straight':\n        axes.y\n          .tickSize(-vm._width, 0);\n        break;\n      case 'dashed':\n        axes.y\n          .tickSize(-vm._width, 0);\n        break;\n      }\n    }\n\n    if (vm._config.xAxis && vm._config.xAxis.ticks && vm._config.xAxis.ticks.values) {\n      axes.x.tickValues(vm._config.xAxis.ticks.values);\n    }\n\n    if (vm._config.xAxis && vm._config.xAxis.ticks && vm._config.xAxis.ticks.format) {\n      axes.x.tickFormat(vm._config.xAxis.ticks.format);\n    }\n\n    //Replaced with *addStyle -check\n    if (vm._config.yAxis && vm._config.yAxis.ticks &&\n      vm._config.yAxis.ticks.enabled === true && vm._config.yAxis.ticks.style) {\n\n      switch (vm._config.yAxis.ticks.style) {\n      case 'straightLine':\n        axes.y\n          .tickSize(-vm._width, 0);\n        break;\n      case 'dashLine':\n        axes.y\n          .tickSize(-vm._width, 0);\n        break;\n      }\n    }\n    // addStyle\n    if (vm._addStyle.yAxis.ticks.grid) {\n      switch (vm._addStyle.yAxis.ticks.grid) {\n      case 'straight':\n        axes.y\n          .tickSize(-vm._width, 0);\n        break;\n      case 'dashed':\n        axes.y\n          .tickSize(-vm._width, 0);\n        break;\n      }\n    }\n\n    if (vm._config.yAxis && vm._config.yAxis.ticks && vm._config.yAxis.ticks.format) {\n      axes.y.tickFormat(vm._config.yAxis.ticks.format);\n    }\n    return axes;\n  };\n\n  Chart.loadData = function () {\n    const vm = this;\n    var q;\n\n    if (vm._config.data.tsv) {\n      q = d3.queue()\n        .defer(d3.tsv, vm._config.data.tsv);\n    }\n\n    if (vm._config.data.json) {\n      q = d3.queue()\n        .defer(d3.json, vm._config.data.json);\n    }\n\n    if (vm._config.data.csv) {\n      q = d3.queue()\n        .defer(d3.csv, vm._config.data.csv);\n    }\n\n    if (vm._config.data.raw) {\n      q = d3.queue()\n        .defer(vm.mapData, vm._config.data.raw);\n    }\n\n    if (vm._config.data.cartodb) {\n      q = d3.queue()\n        .defer(carto.query, vm._config.data);\n    }\n\n    if (vm._config.map && vm._config.map.topojson && vm._config.map.topojson.url) {\n      q.defer(d3.json, vm._config.map.topojson.url);\n    }\n\n    if (vm._config.plotOptions && vm._config.plotOptions.bars &&\n      vm._config.plotOptions.bars.averageLines && Array.isArray(vm._config.plotOptions.bars.averageLines) &&\n      vm._config.plotOptions.bars.averageLines.length > 0) {\n\n      vm._config.plotOptions.bars.averageLines.forEach(function (l) {\n        if (l.data.cartodb) {\n          q.defer(carto.query, l.data);\n        }\n      });\n    }\n\n    return q;\n  };\n\n  Chart.initLayers = function () {\n    const vm = this;\n    vm.layers.forEach(function (ly) {\n      ly.data(vm._data)\n        .scales();\n\n      //@TODO validate domains from multiple layers\n      vm._scales = ly._scales;\n    });\n  };\n\n\n  Chart.drawSVG = function () {\n    const vm = this;\n\n    //Remove any previous svg\n    d3.select(vm._config.bindTo).select('svg').remove();\n    d3.select(vm._config.bindTo).html('');\n\n    //Add the css template class\n    if (vm._config.template) {\n      d3.select(vm._config.bindTo).classed(vm._config.template, true);\n    }\n\n    //Add title to the chart\n    if (vm._config && vm._config.title) {\n      d3.select(vm._config.bindTo).append('div')\n        .attr('class', 'chart-title')\n        .html(vm._config.title)\n        .style('display', 'flex')\n        .style('justify-content', 'center')\n        .style('align-items', 'center')\n        .style('font-size', vm._addStyle.title.fontSize)\n        .style('font-weight', vm._addStyle.title.fontWeight)\n        .style('color', vm._addStyle.title.textColor)\n        .style('text-align', vm._addStyle.title.textAlign);\n\n      if (vm._addStyle.title.hr.enabled) {\n        d3.select(vm._config.bindTo).append('hr')\n          .attr('class', 'hr-title')\n          .style('width', '80%')\n          .style('margin-left', '10%')\n          .style('margin-top', '0.5em')\n          .style('border-width', vm._addStyle.title.hr.borderWidth)\n          .style('border-color', vm._addStyle.title.hr.borderColor);\n      }\n    }\n\n    //Add Legend to the chart\n    //@TODO - PASS THE STYLES TO DBOX.CSS\n    //@TODO - ALLOW DIFFERENT POSSITIONS FOR THE LEGEND\n    if (vm._config.legend && vm._config.legend.enabled === true && vm._config.legend.position === 'top') {\n      var legend = d3.select(vm._config.bindTo).append('div')\n        .attr('class', 'chart-legend-top');\n\n      var html = '';\n      html += '<div style=\"background-color:#E2E2E1;text-align:center;height: 40px;margin: 0px 15px\">';\n      vm._config.legend.categories.forEach(function (c) {\n        html += '<div class=\"dbox-legend-category-title\" style=\"margin:0 20px;\"><span class=\"dbox-legend-category-color\" style=\"background-color:' + c.color + ';\"> </span><span style=\"height: 10px;float: left;margin: 10px 5px 5px 5px;border-radius: 50%;\">' + c.title + '</span></div>';\n      });\n      html += '</div>';\n      legend.html(html);\n    }\n\n\n    //Create the svg\n    vm._fullSvg = d3.select(vm._config.bindTo).append('svg')\n      .style('font-size', vm._config.chart ? vm._config.chart['font-size'] ? vm._config.chart['font-size'] : '12px' : '12px')\n      .attr('width', vm._width + vm._margin.left + vm._margin.right)\n      .attr('height', vm._height + vm._margin.top + vm._margin.bottom);\n\n    vm._svg = vm._fullSvg\n      .append('g')\n      .attr('transform', 'translate(' + vm._margin.left + ',' + vm._margin.top + ')');\n\n\n    //Call the tip function\n    /*if(vm._config.data.tip){\n      vm._svg.call(vm._tip);\n    }*/\n\n    //Apply background color\n\n    d3.select(vm._config.bindTo + ' svg').style('background-color', vm._addStyle.chart.backgroundColor.color);\n\n\n\n    //Legend for average lines\n    /*\n    d3.select(vm._config.bindTo).append('div')\n      .attr('class', 'chart-legend-bottom');\n    if(vm._config.plotOptions && vm._config.plotOptions.bars\n      && vm._config.plotOptions.bars.averageLines && Array.isArray(vm._config.plotOptions.bars.averageLines)\n      && vm._config.plotOptions.bars.averageLines.length >0 ){\n\n      d3.select(vm._config.bindTo).append('div')\n        .attr('class', 'container-average-lines')\n        .append('div')\n          .attr('class', 'legend-average-lines')\n        .html('Average Lines Controller')\n    }\n    */\n\n    if (vm._config.hasOwnProperty('legend')) {\n      vm.drawLegend();\n    }\n  };\n\n  Chart.drawLayers = function () {\n    const vm = this;\n    vm.layers.forEach(function (ly) {\n      ly.draw();\n    });\n  };\n\n  Chart.drawLegend = function () {\n    const vm = this;\n\n    const legendTip = vm.helper.utils.d3.tip().html(d => {\n      return '<div class=\"title-tip\">' + (d.name || d) + '</div>';\n    });\n    vm._fullSvg.call(legendTip);\n    var legendBox;\n    // Draw legend, defaults to right\n    if (vm._config.styles && vm._addStyle.legend.position === 'bottom') {\n      legendBox = vm._fullSvg.append('g')\n        .attr('class', 'legendBox')\n        .attr('width', vm._width)\n        .attr('transform', 'translate(' + vm._config.size.margin.left + ',' + (vm._config.size.height - 30) +\n          ')');\n    } else {\n      legendBox = vm._fullSvg.append('g')\n        .attr('class', 'legendBox')\n        .attr('transform', 'translate(' + (vm._config.size.width - vm._config.size.margin.right + 5) + ',' + 1 * 19 + ')');\n    }\n\n    if (vm._config.legendTitle) {\n      legendBox.append('text')\n        .attr('class', 'legend-title')\n        .text(vm._config.legendTitle);\n\n      //wrap legend title if text size exceeds 70% of container\n      let lWidth = vm._config.size.margin.right;\n      var text = d3.selectAll('.legend-title'),\n        words = text.text().split(/\\s+/).reverse(),\n        word,\n        line = [],\n        lineNumber = 1,\n        lineHeight = 1.1, // ems\n        y = text.attr('y'),\n        dy = 0,\n        tspan = text.text(null).append('tspan').attr('x', 0).attr('y', y).attr('dy', dy + 'em');\n      while (word = words.pop()) {\n        line.push(word);\n        tspan.text(line.join(' '));\n        if (tspan.node().getComputedTextLength() > lWidth) {\n          line.pop();\n          tspan.text(line.join(' '));\n          line = [word];\n          ++lineNumber;\n          tspan = text.append('tspan').attr('x', 0).attr('y', y).attr('dy', lineHeight + 'em').text(word);\n        }\n      }\n    }\n\n    let lbWidth = vm._config.size.margin.right * 0.8;\n\n    if (vm._config.legendType === 'checkbox') {\n      let size = 18,\n        x = 0,\n        y = 0,\n        rx = 2,\n        ry = 2,\n        markStrokeWidth = 3;\n\n      vm._scales.color.domain(vm._config.legend.map(o => o.name));\n\n      var legendCheck = legendBox.selectAll('.legend-checkbox')\n        .data(vm._config.legend)\n        .enter().append('g')\n        .attr('class', '.legend-checkbox legend')\n        .attr('transform', function (d, i) {\n          return 'translate(0,' + (vm._config.legendTitle && lineNumber > 1 ? lineNumber * lineHeight + i : 1 + i) * 20 + ')';\n        })\n        .on('click', function (d, i) {\n          // Run the custom function\n          if (typeof vm._config.events.onClickLegend === 'function') {\n            vm._config.events.onClickLegend.call(this, d, i);\n          }\n          d3.event.stopPropagation();\n        });\n\n      legendCheck.append('rect')\n        .attr('width', size)\n        .attr('height', size)\n        .attr('x', x)\n        .attr('rx', rx)\n        .attr('ry', ry)\n        .attr('fill-opacity', 1)\n        .attr('fill', function (d) {\n          return vm._scales.color(d.name);\n        });\n\n\n      let coordinates = [\n        {\n          x: x + (size / 8),\n          y: y + (size / 2)\n        },\n        {\n          x: x + (size / 2.2),\n          y: (y + size) - (size / 4)\n        },\n        {\n          x: (x + size) - (size / 8),\n          y: (y + (size / 10))\n        }\n      ];\n\n      let line = d3.line()\n        .x(function (d) {\n          return d.x;\n        })\n        .y(function (d) {\n          return d.y;\n        });\n\n      // mark\n      legendCheck.append('path')\n        .attr('d', line(coordinates))\n        .attr('stroke-width', markStrokeWidth)\n        .attr('stroke', 'white')\n        .attr('fill', 'none')\n        .attr('class', 'mark')\n        .property('checked', function (d) {\n          // External function call. It must be after all the internal code; allowing the user to overide \n          return d.active;\n        })\n        .attr('opacity', function () {\n          if (d3.select(this).property('checked')) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n\n      legendCheck.append('text')\n        .attr('class', 'labelText')\n        .attr('x', 20)\n        .attr('y', 9)\n        .attr('dy', '.35em')\n        .attr('text-anchor', 'start')\n        .text(function (d) {\n          //External function call. It must be after all the internal code; allowing the user to overide \n          return d.name;\n        });\n\n      //cut label text if text size exceeds 80% of container\n      legendCheck.selectAll('text').each(function (d) {\n        if (typeof (d.name) === 'string') {\n          if (this.getComputedTextLength() > lbWidth) {\n            d3.select(this)\n              .attr('title', d.name)\n              .on('mouseover', legendTip.show)\n              .on('mouseout', legendTip.hide);\n            let i = 1;\n            while (this.getComputedTextLength() > lbWidth) {\n              d3.select(this).text(function (d) {\n                return d['name'].slice(0, -i) + '...';\n              });\n              ++i;\n            }\n          } else {\n            return d;\n          }\n        }\n      });\n    } else {\n      var legend;\n      if (vm._config.styles && vm._addStyle.legend.position === 'bottom') {\n        legend = legendBox.selectAll('.legend')\n          .data(vm._config.legend)\n          .enter().append('g')\n          .attr('class', 'legend')\n          .attr('width', vm._width / (vm._config.legend.length + 1))\n          .attr('transform', function (d, i) {\n            //horizontal position \n            //what if there are too many legends?\n            return 'translate(' + vm._width / (vm._config.legend.length + 1) * i + ',' + (vm._config.legendTitle && lineNumber > 1 ? lineNumber * lineHeight : 0) * 19 + ')';\n          });\n\n      } else {\n        legend = legendBox.selectAll('.legend')\n          .data(vm._config.legend)\n          .enter().append('g')\n          .attr('class', 'legend')\n          .attr('transform', function (d, i) {\n            return 'translate(' + 5 + ',' + (vm._config.legendTitle && lineNumber > 1 ? lineNumber * lineHeight + i : 1 + i) * 19 + ')';\n          });\n      }\n\n      if (vm._addStyle.legend.figure === 'circle') {\n        legend.append('circle')\n          .attr('cx', 2)\n          .attr('cy', 9)\n          .attr('r', 7)\n          .attr('stroke-width', 2)\n          .attr('stroke', function (d) {\n            return vm._scales.color(d.name);\n          })\n          .attr('fill', function (d) {\n            return vm._scales.color(d.name);\n          })\n          .attr('fill-opacity', 0.8);\n      } else {\n        legend.append('rect')\n          .attr('x', 0)\n          .attr('width', 18)\n          .attr('height', 18)\n          .attr('fill', function (d) {\n            return vm._scales.color(d.name);\n          });\n      }\n\n      legend.append('text')\n        .attr('x', 20)\n        .attr('y', 9)\n        .attr('dy', '.35em')\n        .attr('text-anchor', 'start')\n        .text(function (d) {\n          //External function call. It must be after all the internal code; allowing the user to overide \n          return d.name;\n        });\n\n      //cut label text if text size exceeds 80% of container\n      let lbWidth = vm._config.size.margin.right - 19;\n      legend.selectAll('text').each(function (d) {\n        if (typeof (d.name) === 'string') {\n          if (this.getComputedTextLength() > lbWidth) {\n            d3.select(this)\n              .attr('title', d.name)\n              .on('mouseover', legendTip.show)\n              .on('mouseout', legendTip.hide);\n            let i = 1;\n            while (this.getComputedTextLength() > lbWidth) {\n              d3.select(this).text(function (d) {\n                return d['name'].slice(0, -i) + '...';\n              });\n              ++i;\n            }\n          } else {\n            return d;\n          }\n        }\n      });\n    }\n\n    /**\n     * Give some extra style\n     */\n\n    legendBox.selectAll('.legend text')\n      .attr('fill', vm._addStyle.legend.text.textColor)\n      .attr('font-size', vm._addStyle.legend.text.fontSize)\n      .attr('font-weight', vm._addStyle.legend.text.fontWeight);\n  };\n\n  Chart.drawGrid = function () {\n    const vm = this;\n    return vm;\n  };\n\n  Chart.drawAxes = function () {\n    const vm = this;\n    var yAxis;\n\n    /**\n     * Draw axes depends on axes config and styles.\n     * Let's start with config.\n     */\n\n\n    //Axes tooltip\n    const axesTip = vm.helper.utils.d3.tip().html(d => {\n      return '<div class=\"title-tip\">' + d + '</div>';\n    });\n\n    if ((!vm._config.yAxis || (vm._config.yAxis && vm._config.yAxis.enabled !== false)) && (!vm._config.xAxis || (vm._config.xAxis && vm._config.xAxis.enabled !== false))) {\n      vm._svg.call(axesTip);\n    }\n\n\n    /**\n     * Config axes\n     */\n\n    // y\n\n    if (!vm._config.yAxis || (vm._config.yAxis && vm._config.yAxis.enabled !== false)) {\n      yAxis = vm._svg.append('g')\n        .attr('class', 'y axis')\n        .call(vm._axes.y);\n\n      if (vm._config.yAxis && vm._config.yAxis.text) {\n        yAxis.append('text')\n          .attr('class', 'axis-title')\n          .attr('y', -vm._margin.left * 0.7)\n          .attr('x', -vm._height / 2)\n          .attr('transform', 'rotate(-90)')\n          .attr('text-anchor', 'middle')\n          .text(vm._config.yAxis.text);\n      }\n    }\n\n    if (vm._config.yAxis.domain && vm._config.yAxis.domain.hasOwnProperty('enabled')) {\n      if (vm._config.yAxis.ticks) {\n        if (vm._config.yAxis.domain.enabled === false && vm._config.yAxis.ticks.enabled === false) {\n          d3.select('g.y.axis .domain').remove();\n          d3.selectAll('g.y.axis .tick').remove();\n        } else if (vm._config.yAxis.domain.enabled === false && vm._config.yAxis.ticks.enabled === true) {\n          d3.select('g.y.axis .domain').remove();\n          //d3.selectAll('g.y.axis .tick text').remove();\n        }\n      } else {\n        if (vm._config.yAxis.domain.enabled === false) {\n          d3.select('g.y.axis .domain').remove();\n          d3.selectAll('g.y.axis .tick').remove();\n        }\n      }\n    }\n\n    if (!vm._config.yAxis || (vm._config.yAxis && vm._config.yAxis.enabled !== false)) {\n      // Add ellipsis to cut label text when too long\n      // for yAxis on the left\n      yAxis.selectAll('text').each(function (d) {\n        let element = this;\n        if (typeof (d) === 'string') {\n          if (this.getComputedTextLength() > 0.8 * vm._margin.left) {\n            d3.select(element)\n              .on('mouseover', axesTip.show)\n              .on('mouseout', axesTip.hide);\n            let i = 1;\n            while (this.getComputedTextLength() > 0.8 * vm._margin.left) {\n              d3.select(this).text(function (d) {\n                return d.slice(0, -i) + '...';\n              }).attr('title', d);\n              ++i;\n            }\n          } else {\n            return d;\n          }\n        }\n      });\n    }\n\n    //Dropdown Y axis\n    if (vm._config.yAxis && vm._config.yAxis.dropdown && vm._config.yAxis.dropdown.enabled === true) {\n      var yAxisDropDown = d3.select(vm._config.bindTo).append('div').attr('class', 'dbox-yAxis-select')\n        .append('select')\n        .on('change', function () {\n          vm.updateAxis('y', this.value);\n        });\n\n      /*\n      .attr('style', function(){\n                              var x = -1*d3.select(vm._config.bindTo).node().getBoundingClientRect().width/2+ vm._chart._margin.left/4;\n                              var y = -1*d3.select(vm._config.bindTo).node().getBoundingClientRect().height/2;\n                              return 'transform: translate('+x+'px,'+y+'px) rotate(-90deg);'\n                            })\n      */\n\n      var x = -1 * d3.select(vm._config.bindTo).node().getBoundingClientRect().width / 2 + vm._margin.left / 2.5;\n      var y = -1 * d3.select(vm._config.bindTo).node().getBoundingClientRect().height / 1.5;\n\n      if (vm._config.yAxis.dropdown.styles) {\n\n        var styles = vm._config.yAxis.dropdown.styles;\n        styles.display = 'block';\n        styles.transform = 'translate(' + x + 'px,' + y + 'px) rotate(-90deg)';\n        styles.margin = 'auto';\n        styles['text-align'] = 'center';\n        styles['text-align-last'] = 'center';\n\n        d3.select('.dbox-yAxis-select select').styles(styles);\n\n        d3.select('.dbox-yAxis-select select option').styles({\n          'text-align': 'left'\n        });\n\n      } else {\n        d3.select('.dbox-yAxis-select select').styles({\n          'display': 'block',\n          'transform': 'translate(' + x + 'px,' + y + 'px) rotate(-90deg)',\n          'margin': 'auto',\n          'text-align': 'center',\n          'text-align-last': 'center'\n        });\n\n        d3.select('.dbox-yAxis-select select option').styles({\n          'text-align': 'left'\n        });\n      }\n\n      if (vm._config.yAxis.dropdown.options) {\n\n        yAxisDropDown.selectAll('option')\n          .data(vm._config.yAxis.dropdown.options)\n          .enter().append('option')\n          .attr('class', function (d) {\n            return d.value;\n          })\n          .attr('value', function (d) {\n            return d.value;\n          })\n          .text(function (d) {\n            return d.title;\n          })\n          .property('selected', function (d) {\n            return d.selected;\n          });\n\n      } else {\n        console.log('No options present in config');\n      }\n    }\n\n    // y\n\n    /////////////////////////////\n\n    // x\n    if (!vm._config.xAxis || (vm._config.xAxis && vm._config.xAxis.enabled !== false)) {\n\n      vm._xAxis = vm._svg.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', 'translate(0,' + vm._height + ')')\n        .call(vm._axes.x);\n\n      //Do not show line if axis is disabled\n      if (vm._config.xAxis.line && vm._config.xAxis.line.enabled == false) {\n        vm._xAxis.selectAll('path')\n          .style('display', 'none');\n      }\n\n      //Set custom position for ticks\n      if (vm._config.xAxis.ticks && vm._config.xAxis.ticks.x) {\n        vm._xAxis.selectAll('text')\n          .attr('dx', vm._config.xAxis.ticks.x);\n      }\n\n      if (vm._config.xAxis.ticks && vm._config.xAxis.ticks.y) {\n        vm._xAxis.selectAll('text')\n          .attr('dy', vm._config.xAxis.ticks.y);\n      }\n\n      //Disable ticks when set to false\n      if (vm._config.xAxis.ticks && vm._config.xAxis.ticks.line && vm._config.xAxis.ticks.line.enabled === false) {\n        vm._xAxis.selectAll('line')\n          .style('display', 'none');\n      }\n    }\n\n    if (vm._config.xAxis && vm._config.xAxis.text) {\n      vm._xAxis.append('text')\n        .attr('class', 'axis-title')\n        .attr('x', vm._width / 2)\n        .attr('y', 40)\n        .style('text-anchor', 'middle')\n        .text(vm._config.xAxis.text);\n    }\n\n    if (vm._config.xAxis.domain !== undefined && vm._config.xAxis.domain.hasOwnProperty('enabled')) {\n      if (vm._config.xAxis.ticks) {\n        if (vm._config.xAxis.domain.enabled === false && vm._config.xAxis.ticks.enabled === false) {\n          d3.select(vm._config.bindTo + ' g.x.axis .domain').remove();\n          d3.selectAll('g.x.axis .tick').remove();\n        } else if (vm._config.xAxis.domain.enabled === false && vm._config.xAxis.ticks.enabled === true) {\n          d3.select(vm._config.bindTo + ' g.x.axis .domain').remove();\n          //d3.selectAll('g.x.axis .tick text').remove();\n        }\n      } else {\n        if (vm._config.xAxis.domain.enabled === false) {\n          d3.select(vm._config.bindTo + ' g.x.axis .domain').remove();\n          d3.selectAll(vm._config.bindTo + ' g.x.axis .tick').remove();\n        }\n      }\n    }\n\n    //Dropdown X axis\n    if (vm._config.xAxis && vm._config.xAxis.dropdown && vm._config.xAxis.dropdown.enabled === true) {\n      var xAxisDropDown = d3.select(vm._config.bindTo).append('div').attr('class', 'dbox-xAxis-select')\n        .append('select')\n        .on('change', function () {\n          vm.updateAxis('x', this.value);\n        });\n\n      if (vm._config.xAxis.dropdown.styles) {\n\n        var styles = vm._config.xAxis.dropdown.styles;\n        styles.display = 'block';\n        styles.margin = 'auto';\n        styles['text-align'] = 'center';\n        styles['text-align-last'] = 'center';\n\n        d3.select('.dbox-xAxis-select select').styles(styles);\n\n        d3.select('.dbox-xAxis-select select option').styles({\n          'text-align': 'left'\n        });\n\n      } else {\n        d3.select('.dbox-xAxis-select select').styles({\n          'display': 'block',\n          'margin': 'auto',\n          'text-align': 'center',\n          'text-align-last': 'center'\n        });\n\n        d3.select('.dbox-xAxis-select select option').styles({\n          'text-align': 'left'\n        });\n      }\n\n      if (vm._config.xAxis.dropdown.options) {\n\n        xAxisDropDown.selectAll('option')\n          .data(vm._config.xAxis.dropdown.options)\n          .enter().append('option')\n          .attr('class', function (d) {\n            return d.value;\n          })\n          .attr('value', function (d) {\n            return d.value;\n          })\n          .text(function (d) {\n            return d.title;\n          })\n          .property('selected', function (d) {\n            return d.selected;\n          });\n\n      } else {\n        console.log('No options present in config');\n      }\n    }\n\n    /**\n     * Let's style axes\n     */\n    //Style Y axis\n    if (vm._config.xAxis.enabled !== false && vm._addStyle.xAxis.enabled) {\n      //axis line\n      yAxis.selectAll('.domain')\n        .attr('stroke-linecap', 'round')\n        .attr('stroke-width', vm._addStyle.yAxis.axis.strokeWidth)\n        .attr('stroke', vm._addStyle.yAxis.axis.strokeColor)\n        .attr('opacity', vm._addStyle.yAxis.axis.strokeOpacity);\n\n      //axis title\n      yAxis.selectAll('.axis-title')\n        .attr('font-size', vm._addStyle.yAxis.title.fontSize)\n        .attr('font-weight', vm._addStyle.yAxis.title.fontWeight)\n        .attr('fill', vm._addStyle.yAxis.title.textColor)\n        .attr('text-anchor', vm._addStyle.yAxis.title.textAnchor);\n\n      //tick lines\n      yAxis.selectAll('.tick line')\n        .attr('stroke-width', vm._addStyle.yAxis.ticks.strokeWidth)\n        .attr('stroke', vm._addStyle.yAxis.ticks.strokeColor)\n        .attr('stroke-opacity', vm._addStyle.yAxis.ticks.opacity)\n        .attr('width', vm._addStyle.yAxis.ticks.tickWidth)\n        //condition gridline\n        .attr('stroke-dasharray', vm._addStyle.yAxis.ticks.gridDashed)\n        .attr('transform', 'translate(-' + vm._addStyle.yAxis.axis.paddingTick + ', 0)');\n      //don't draw first tick when styled as grid\n      if (vm._addStyle.yAxis.ticks.grid) {\n        yAxis.selectAll('.tick:first-of-type line:first-of-type')\n          .attr('stroke', 'none');\n      }\n\n      //tick text\n      yAxis.selectAll('.tick text')\n        .attr('font-size', vm._addStyle.yAxis.labels.fontSize)\n        .attr('font-weight', vm._addStyle.yAxis.labels.fontWeight)\n        .attr('fill', vm._addStyle.yAxis.labels.textColor)\n        .attr('text-anchor', vm._addStyle.yAxis.labels.textAnchor)\n        .attr('transform', 'translate(-' + vm._addStyle.yAxis.axis.paddingTick + ', 0)');\n\n    }\n\n    //Style X axis\n    if (vm._config.xAxis.enabled !== false && vm._addStyle.xAxis.enabled) {\n      //axis line\n      vm._xAxis.selectAll('.domain')\n        .attr('stroke-linecap', 'round')\n        .attr('stroke-width', vm._addStyle.xAxis.axis.strokeWidth)\n        .attr('stroke', vm._addStyle.xAxis.axis.strokeColor)\n        .attr('opacity', vm._addStyle.xAxis.axis.strokeOpacity);\n\n      //axis title\n      vm._xAxis.selectAll('.axis-title')\n        .attr('font-size', vm._addStyle.xAxis.title.fontSize)\n        .attr('font-weight', vm._addStyle.xAxis.title.fontWeight)\n        .attr('fill', vm._addStyle.xAxis.title.textColor)\n        .attr('text-anchor', vm._addStyle.xAxis.title.textAnchor)\n        .attr('transform', 'translate(0, ' + vm._addStyle.xAxis.axis.paddingTick + ')');\n\n      //tick lines\n      vm._xAxis.selectAll('.tick line')\n        .attr('stroke-width', vm._addStyle.xAxis.ticks.strokeWidth)\n        .attr('stroke', vm._addStyle.xAxis.ticks.strokeColor)\n        .attr('transform', 'translate(0, ' + vm._addStyle.xAxis.axis.paddingTick + ')');\n      //don't draw first tick when styled as grid\n      if (vm._addStyle.xAxis.ticks.grid) {\n        vm._xAxis.selectAll('.tick:first-of-type line:first-of-type')\n          .attr('stroke', 'none');\n      }\n\n      //tick text\n      vm._xAxis.selectAll('.tick text')\n        .attr('font-size', vm._addStyle.xAxis.labels.fontSize)\n        .attr('font-weight', vm._addStyle.xAxis.labels.fontWeight)\n        .attr('fill', vm._addStyle.xAxis.labels.textColor)\n        .attr('text-anchor', vm._addStyle.xAxis.labels.textAnchor)\n        .attr('transform', vm._addStyle.xAxis.labels.rotate ? 'translate(0,50) rotate(' + vm._addStyle.xAxis.axis.labels.rotate + ')' : 'translate(0, ' + vm._addStyle.xAxis.axis.paddingTick + ')');\n    }\n\n    if (!vm._config.xAxis || (vm._config.xAxis && vm._config.xAxis.enabled !== false)) {\n      // Add ellipsis to cut label text \n      // when it is too long\n    \n      const biggestLabelWidth = d3.max(d3.select('.x.axis').selectAll('text').nodes().map(o => o.getComputedTextLength())); // Biggest label computed text length\n      let xBandWidth = vm._scales.x.bandwidth ? vm._scales.x.bandwidth() : (vm._config.size.width - (vm._config.size.margin.left + vm._config.size.margin.right)) / vm._scales.x.ticks();\n      if (biggestLabelWidth > xBandWidth) { // Biggest label doesn't fit\n        vm._xAxis.selectAll('text').each(function (d) {\n          if (typeof (d) === 'string') {\n            // Vertical labels\n            d3.select(this)\n                .attr('text-anchor', 'end')\n                .attr('dy', 0)\n                .attr('transform', 'translate(-5,8)rotate(-90)');\n            // Still doesn't fit!\n            if (this.getComputedTextLength() > 0.8 * vm._config.size.margin.bottom) {\n              d3.select(this)\n                .on('mouseover', axesTip.show)\n                .on('mouseout', axesTip.hide);\n              let i = 1;\n              while (this.getComputedTextLength() > 0.8 * vm._config.size.margin.bottom) {\n                d3.select(this).text(function (d) {\n                  return d.slice(0, -i) + '...';\n                }).attr('title', d);\n                ++i;\n              }\n            } else {\n              return d;\n            }\n          }\n        });\n      } \n    }\n\n    /**\n     * Already replaced with addStyle\n     */\n    /*if (vm._config.yAxis && vm._config.yAxis.enabled !== false) {\n\n      if (vm._config.yAxis && vm._config.yAxis.text) {\n        yAxis.append('text')\n          .attr('class', 'label title')\n          .attr('transform', 'rotate(-90)')\n          .attr('y', vm._config.yAxis.y ? vm._config.yAxis.y : -50)\n          .attr('x', -150)\n          .attr('dy', '.71em')\n          .style('text-anchor', 'middle')\n          .style('fill', vm._config.yAxis.fill ? vm._config.yAxis.fill : 'black')\n          .style('font-size', vm._config.yAxis['font-size'] ? vm._config.yAxis['font-size'] : '12px')\n          .style('font-weight', vm._config.xAxis['font-weight'] ? vm._config.xAxis['font-weight'] : '600')\n          .text(vm._config.yAxis.text);\n      }\n    }*/\n\n    //Set ticks straight or dashed, to be replaced with *addStyle -checked\n    if (vm._config.yAxis.ticks && vm._config.yAxis.ticks.enabled && vm._config.yAxis.ticks.style) {\n      switch (vm._config.yAxis.ticks.style) {\n      case 'straightLine':\n        break;\n      case 'dashLine':\n        d3.selectAll('g.y.axis .tick line').attr('stroke-dasharray', '5, 5');\n        break;\n      }\n    }\n    //To be replaced with *addStyle -checked\n    if (vm._config.yAxis.domain && vm._config.yAxis.domain.enabled && vm._config.yAxis.domain.stroke) {\n      d3.select('g.y.axis .domain').attr('stroke', vm._config.yAxis.domain.stroke);\n    }\n\n    //To be replaced with *addStyle -checked\n    if (vm._config.yAxis.domain && vm._config.yAxis.domain.enabled && vm._config.yAxis.domain['stroke-width']) {\n      d3.select('g.y.axis .domain').attr('stroke-width', vm._config.yAxis.domain['stroke-width']);\n    }\n\n    // y\n\n    /////////////////////////////\n\n    // x\n\n    if (!vm._config.xAxis || (vm._config.xAxis && vm._config.xAxis.enabled !== false)) {\n\n      //To be replaced with *addStyle -checked\n      if (vm._config.xAxis.ticks && vm._config.xAxis.ticks.style) {\n        Object.keys(vm._config.xAxis.ticks.style).forEach(function (k) {\n          vm._xAxis.selectAll('text')\n            .style(k, vm._config.xAxis.ticks.style[k]);\n        });\n      }\n\n      //Set rotation for ticks, to be replaced with *addStyle -checked\n      if (vm._config.xAxis.ticks && vm._config.xAxis.ticks.rotate) {\n        vm._xAxis.selectAll('text')\n          .attr('text-anchor', 'end')\n          .attr('transform', 'rotate(' + vm._config.xAxis.ticks.rotate + ')');\n      }\n\n      //Set ticks straight or dashed, to be replaced with *addStyle -checked\n      if (vm._config.xAxis.ticks && vm._config.xAxis.ticks.enabled && vm._config.xAxis.ticks.style) {\n        switch (vm._config.xAxis.ticks.style) {\n        case 'straightLine':\n          break;\n        case 'dashLine':\n          d3.selectAll(vm._config.bindTo + ' g.x.axis .tick line').attr('stroke-dasharray', '5, 5');\n          break;\n        }\n      }\n\n    }\n\n    //to be replaced with *addStyle -checked\n    if (vm._config.xAxis.domain && vm._config.xAxis.domain.enabled && vm._config.xAxis.domain.stroke) {\n      d3.select(vm._config.bindTo + ' g.x.axis .domain').attr('stroke', vm._config.xAxis.domain.stroke);\n    }\n\n    //to be replaced with *addStyle -checked\n    if (vm._config.xAxis.domain && vm._config.xAxis.domain.enabled && vm._config.xAxis.domain['stroke-width']) {\n      d3.select(vm._config.bindTo + ' g.x.axis .domain').attr('stroke-width', vm._config.xAxis.domain['stroke-width']);\n    }\n\n    //to be replaced with *addStyle\n    /*if (vm._config.xAxis && vm._config.xAxis.text) {\n      xAxis.append('text')\n        .attr('class', 'label title')\n        .attr('x', vm._width / 2)\n        .attr('y', vm._config.xAxis.y ? vm._config.xAxis.y : 30)\n        .style('text-anchor', 'middle')\n        .style('fill', vm._config.xAxis.fill ? vm._config.xAxis.fill : 'black')\n        .style('font-size', vm._config.xAxis['font-size'] ? vm._config.xAxis['font-size'] : '12px')\n        .style('font-weight', vm._config.xAxis['font-weight'] ? vm._config.xAxis['font-weight'] : '600')\n        .text(vm._config.xAxis.text);\n    }*/\n  };\n\n  Chart.updateAxis = function (axis, value) {\n    const vm = this;\n\n    if (axis === 'x') {\n      vm._config.xAxis.dropdown.options.map((obj) => {\n        if (obj.value === value) {\n          obj.selected = true;\n        } else {\n          obj.selected = false;\n        }\n      });\n    } else if (axis === 'y') {\n      vm._config.yAxis.dropdown.options.map((obj) => {\n        if (obj.value === value) {\n          obj.selected = true;\n        } else {\n          obj.selected = false;\n        }\n      });\n    }\n\n    vm._config[axis] = value;\n\n    var layer = vm.layers[0];\n\n    layer._config = vm._config;\n\n    vm.draw();\n\n    // Trigger update chart axis\n    if (vm._config.events && vm._config.events.change) {\n      vm.dispatch.on('change.axis', vm._config.events.change(vm));\n    }\n  };\n\n\n\n  Chart.dispatch = d3.dispatch('load', 'change');\n\n  Chart.mapData = function (data, callback) {\n    callback(null, data);\n  };\n\n  Chart.getDomains = function (data) {\n    const vm = this;\n\n    var domains = {};\n    var minMax = [];\n    var sorted = [];\n\n\n    // Default ascending function\n    var sortFunctionY = function (a, b) {\n      return vm.utils.sortAscending(a.y, b.y);\n    };\n    var sortFunctionX = function (a, b) {\n      return vm.utils.sortAscending(a.x, b.x);\n    };\n\n\n    // if applying sort\n    if (vm._config.data.sort && vm._config.data.sort.order) {\n      switch (vm._config.data.sort.order) {\n      case 'asc':\n        sortFunctionY = function (a, b) {\n          return vm.utils.sortAscending(a.y, b.y);\n        };\n        sortFunctionX = function (a, b) {\n          return vm.utils.sortAscending(a.x, b.x);\n        };\n        break;\n\n      case 'desc':\n        sortFunctionY = function (a, b) {\n          return vm.utils.sortDescending(a.y, b.y);\n        };\n        sortFunctionX = function (a, b) {\n          return vm.utils.sortDescending(a.x, b.x);\n        };\n        break;\n      }\n    }\n\n\n    // xAxis\n    if (vm._config.xAxis && vm._config.xAxis.scale) {\n      switch (vm._config.xAxis.scale) {\n      case 'linear':\n        minMax = d3.extent(data, function (d) {\n          return d.x;\n        });\n        domains.x = minMax;\n        break;\n\n      case 'time':\n        minMax = d3.extent(data, function (d) {\n          return d.x;\n        });\n        domains.x = minMax;\n        break;\n\n      case 'ordinal':\n\n        // If the xAxis' order depends on the yAxis values\n        if (vm._config.data.sort && vm._config.data.sort.axis === 'y') {\n          sorted = data.sort(sortFunctionY);\n        } else {\n          sorted = data.sort(sortFunctionX);\n        }\n\n        domains.x = [];\n        sorted.forEach(function (d) {\n          domains.x.push(d.x);\n        });\n\n        break;\n\n      case 'quantile':\n\n        //The xAxis order depends on the yAxis values\n        if (vm._config.data.sort && vm._config.data.sort.axis === 'y') {\n          sorted = data.sort(sortFunctionY);\n        } else {\n          sorted = data.sort(sortFunctionX);\n        }\n\n        domains.q = [];\n        sorted.forEach(function (d) {\n          domains.q.push(d.x);\n        });\n\n        domains.x = d3.range(vm._config.xAxis.buckets);\n\n        break;\n\n\n      default:\n        minMax = d3.extent(data, function (d) {\n          return d.x;\n        });\n        domains.x = minMax;\n        break;\n      }\n    } else {\n      minMax = d3.extent(data, function (d) {\n        return d.x;\n      });\n      domains.x = minMax;\n    }\n\n    //yAxis\n    if (vm._config.yAxis && vm._config.yAxis.scale) {\n      switch (vm._config.yAxis.scale) {\n      case 'linear':\n        minMax = d3.extent(data, function (d) {\n          return d.y;\n        });\n\n        //Adjust for min values greater than zero\n        //set the min value to -10%\n        if (minMax[0] > 0) {\n          minMax[0] = minMax[0] - (minMax[1] - minMax[0]) * .1;\n        }\n        domains.y = minMax;\n        break;\n\n      case 'time':\n        minMax = d3.extent(data, function (d) {\n          return d.y;\n        });\n        domains.y = minMax;\n        break;\n\n      case 'ordinal':\n        if (vm._config.data.sort && vm._config.data.sort.axis === 'y') {\n\n          sorted = data.sort(function (a, b) {\n            return vm.utils.sortAscending(a.y, b.y);\n          });\n          domains.y = [];\n          sorted.forEach(function (d) {\n            domains.y.push(d.x);\n          });\n\n        } else {\n          domains.y = d3.map(data, function (d) {\n            return d.y;\n          }).keys().sort(function (a, b) {\n            return vm.utils.sortAscending(a, b);\n          });\n        }\n\n        break;\n\n      default:\n        minMax = d3.extent(data, function (d) {\n          return d.y;\n        });\n        domains.y = minMax;\n        break;\n      }\n    } else {\n      minMax = d3.extent(data, function (d) {\n        return d.y;\n      });\n      domains.y = minMax;\n    }\n\n\n    return domains;\n  };\n\n  Chart.destroy = function () {\n    const vm = this;\n    d3.select(vm._config.bindTo).html('');\n  };\n\n  Chart.init(config);\n\n  return Chart;\n}\n","import * as d3 from 'd3';\n\n/*\n * Simple Layer Chart\n */\nexport default function (config, helper) {\n\n  // Link Layer to the helper object in helper.js\n  var Layer = Object.create(helper);\n\n  Layer.init = function (config) {\n    var vm = this;\n\n    vm._config = config ? config : {};\n    vm._data = [];\n    vm._scales = {};\n    vm._tip = vm.utils.d3.tip()\n      .attr('class', 'd3-tip')\n      .direction('n')\n      .html(vm._config.tip || function (d) {\n        var html = '';\n        html += d[vm._config.x] ? ('<span>' + (Number.isNaN(+d[vm._config.x]) || vm._config.xAxis.scale === 'band' ? d[vm._config.x] : vm.utils.format(d[vm._config.x])) + '</span></br>') : '';\n        html += d[vm._config.y] ? ('<span>' + (Number.isNaN(+d[vm._config.y]) || vm._config.yAxis.scale === 'band' ? d[vm._config.y] : vm.utils.format(d[vm._config.y])) + '</span></br>') : '';\n        return html;\n      });\n  };\n\n\n  //-------------------------------\n  //User config functions\n  Layer.id = function (columnName) {\n    var vm = this;\n    vm._config.id = columnName;\n    return vm;\n  };\n\n  Layer.x = function (columnName) {\n    var vm = this;\n    vm._config.x = columnName;\n    return vm;\n  };\n\n  Layer.y = function (columnName) {\n    var vm = this;\n    vm._config.y = columnName;\n    return vm;\n  };\n\n  /**\n   * column name used for the domain values\n   * @param {string} columnName \n   */\n  Layer.fill = function (columnName) {\n    var vm = this;\n    vm._config.fill = columnName;\n    return vm;\n  };\n\n\n  Layer.format = function (format) {\n    var vm = this;\n    if (typeof format == 'function' || format instanceof Function) {\n      vm.utils.format = format;\n    } else {\n      vm.utils.format = d3.format(format);\n    }\n    return vm;\n  };\n\n  Layer.tip = function (tip) {\n    var vm = this;\n    vm._config.tip = tip;\n    return vm;\n  };\n\n  Layer.legend = function (legend) {\n    var vm = this;\n    vm._config.legend = legend;\n    return vm;\n  };\n\n\n  //-------------------------------\n  //Triggered by the chart.js;\n  Layer.data = function (data) {\n    var vm = this;\n\n    if (vm._config.filter) {\n      //In case we want to filter observations\n      data = data.filter(vm._config.filter);\n    }\n\n    vm._data = data.map(function (d) {\n      if (d[vm._config.x] == Number(d[vm._config.x]))\n        d[vm._config.x] = +d[vm._config.x];\n      if (d[vm._config.y] == Number(d[vm._config.y]))\n        d[vm._config.y] = +d[vm._config.y];\n      return d;\n    });\n\n    //@TODO - ALLOW MULITPLE SORTS\n    if (vm._config.sortBy) {\n      vm._data = vm._data.sort(function (a, b) {\n        return a[vm._config.sortBy[0]] - b[vm._config.sortBy[0]];\n      });\n    }\n\n    if (vm._config.hasOwnProperty('quantiles')) {\n      vm._quantiles = vm._setQuasecondntile(data);\n      vm._minMax = d3.extent(data, function (d) {\n        return +d[vm._config.fill];\n      });\n    }\n\n    return vm;\n  };\n\n  Layer.scales = function () {\n    var vm = this;\n    var config;\n    //vm._scales = scales;\n    /* Use\n     * vm._config.x\n     * vm._config.xAxis.scale\n     * vm._config.y\n     * vm._config.yAxis.scale\n     * vm._data\n     */\n    if (vm._config.hasOwnProperty('x') && vm._config.hasOwnProperty('y')) {\n      config = {\n        column: vm._config.x,\n        type: vm._config.xAxis.scale,\n        range: [0, vm.chart.width],\n        minZero: vm._config.xAxis.minZero\n      };\n      if (vm._config.xAxis.domains) {\n        config.domains = vm._config.xAxis.domains;\n      }\n      vm._scales.x = vm.utils.generateScale(vm._data, config);\n\n      config = {\n        column: vm._config.y,\n        type: vm._config.yAxis.scale,\n        range: [vm.chart.height, 0],\n        minZero: vm._config.yAxis.minZero\n      };\n      if (vm._config.yAxis.domains) {\n        config.domains = vm._config.yAxis.domains;\n      }\n      vm._scales.y = vm.utils.generateScale(vm._data, config);\n    }\n\n    if (vm._config.hasOwnProperty('colors'))\n      vm._scales.color = d3.scaleOrdinal(vm._config.colors);\n    else\n      vm._scales.color = d3.scaleOrdinal(d3.schemeCategory10);\n\n    return vm;\n  };\n\n\n  Layer.draw = function () {\n    var vm = this;\n\n    vm.chart.svg().call(vm._tip);\n\n    vm.chart.svg().selectAll('.figure')\n      .data(vm._data)\n      .enter().append('rect')\n      .attr('class', 'figure')\n      .attr('id', function (d, i) {\n        var id = 'figure-' + i;\n        if (vm._config.id) {\n          id = 'figure-' + d[vm._config.id];\n        }\n        return id;\n      })\n      .attr('x', function (d) {\n        var value = vm._scales.x(d[vm._config.x]);\n        if (vm._config.xAxis.scale == 'linear') {\n          if (d[vm._config.x] > 0) {\n            value = vm._scales.x(0);\n          }\n        }\n        return value;\n      })\n      .attr('y', function (d) {\n        var value =  vm._scales.y(d[vm._config.y]);\n        if (vm._config.yAxis.scale === 'linear') {\n          if (d[vm._config.y] < 0) { \n            value = vm._scales.y(0);\n          }\n        }\n        return value;\n      })\n      .attr('width', function (d) {\n        return vm._scales.x.bandwidth ? vm._scales.x.bandwidth() : Math.abs(vm._scales.x(d[vm._config.x]) - vm._scales.x(0));\n      })\n      .attr('height', function (d) {\n        return vm._scales.y.bandwidth ? vm._scales.y.bandwidth() : Math.abs(vm._scales.y(d[vm._config.y]) - vm._scales.y(0));\n      })\n      .attr('fill', function (d) {\n        return vm._scales.color !== false ? vm._scales.color(d[vm._config.fill]) : vm._getQuantileColor(d[vm._config.fill], 'default');\n      })\n      .style('opacity', 0.9)\n      .on('mouseover', function (d, i) {\n        if (vm._config.hasOwnProperty('quantiles') && vm._config.quantiles.hasOwnProperty('colorsOnHover')) { //OnHover colors\n          d3.select(this).attr('fill', function (d) {\n            return vm._getQuantileColor(d[vm._config.fill], 'onHover');\n          });\n        }\n        vm._tip.show(d, d3.select(this).node());\n\n        if (vm._config.hasOwnProperty('onmouseover')) { //External function call, must be after all the internal code; allowing the user to overide \n          vm._config.onmouseover.call(this, d, i);\n        }\n\n      })\n      .on('mouseout', function (d, i) {\n        if (vm._config.hasOwnProperty('quantiles') && vm._config.quantiles.hasOwnProperty('colorsOnHover')) { //OnHover reset default color\n          d3.select(this).attr('fill', function (d) {\n            return vm._getQuantileColor(d[vm._config.fill], 'default');\n          });\n        }\n        vm._tip.hide();\n\n        if (vm._config.hasOwnProperty('onmouseout')) { //External function call, must be after all the internal code; allowing the user to overide \n          vm._config.onmouseout.call(this, d, i);\n        }\n      })\n      .on('click', function (d, i) {\n        if (vm._config.hasOwnProperty('click')) {\n          vm._config.onclick.call(this, d, i);\n        }\n      });\n\n    return vm;\n  };\n\n  Layer._getQuantileColor = function (d, type) {\n    var vm = this;\n    var total = parseFloat(d);\n\n    //@TODO use quantile scale instead of manual calculations \n    if (vm._config && vm._config.Layer.quantiles && vm._config.Layer.quantiles.colors) {\n      if (vm._quantiles.length > 2) {\n\n        if (vm._config && vm._config.Layer.min !== undefined && vm._config.Layer.max !== undefined) {\n          if (total < vm._config.Layer.min || total > vm._config.Layer.max) {\n            return vm._config.Layer.quantiles.outOfRangeColor;\n          }\n        } else {\n          if (total < vm._minMax[0] || total > vm._minMax[1]) {\n            return vm._config.Layer.quantiles.outOfRangeColor;\n          }\n        }\n\n        if (type == 'default') {\n          if (total <= vm._quantiles[1]) {\n            return vm._config.Layer.quantiles.colors[0]; //'#f7c7c5';\n          } else if (total <= vm._quantiles[2]) {\n            return vm._config.Layer.quantiles.colors[1]; //'#e65158';\n          } else if (total <= vm._quantiles[3]) {\n            return vm._config.Layer.quantiles.colors[2]; //'#c20216';\n          } else if (total <= vm._quantiles[4]) {\n            return vm._config.quantiles.colors[3]; //'#750000';\n          } else if (total <= vm._quantiles[5]) {\n            return vm._config.quantiles.colors[4]; //'#480000';\n          }\n        }\n\n        if (type == 'onHover' && vm._config.hasOwnProperty('quantiles') && vm._config.quantiles.hasOwnProperty('colorsOnHover')) {\n          if (total <= vm._quantiles[1]) {\n            return vm._config.quantiles.colorsOnHover[0]; //'#f7c7c5';\n          } else if (total <= vm._quantiles[2]) {\n            return vm._config.quantiles.colorsOnHover[1]; //'#e65158';\n          } else if (total <= vm._quantiles[3]) {\n            return vm._config.quantiles.colorsOnHover[2]; //'#c20216';\n          } else if (total <= vm._quantiles[4]) {\n            return vm._config.quantiles.colorsOnHover[3]; //'#750000';\n          } else if (total <= vm._quantiles[5]) {\n            return vm._config.quantiles.colorsOnHover[4]; //'#480000';\n          }\n        }\n\n      }\n    }\n\n    if (vm._quantiles.length == 2) {\n      /*if(total === 0 ){\n        return d4theme.colors.quantiles[0];//return '#fff';\n      }else if(total <= vm._quantiles[1]){\n        return d4theme.colors.quantiles[1];//return '#f7c7c5';\n      }*/\n      if (total <= vm._quantiles[1]) {\n        return vm._config.quantiles.colors[0]; //'#f7c7c5';\n      }\n    }\n\n  };\n\n  Layer.init(config);\n  return Layer;\n}\n","/*\n * Dboxjs\n *\n * You can import other modules here, including external packages. When\n * bundling using rollup you can mark those modules as external and have them\n * excluded or, if they have a jsnext:main entry in their package.json (like\n * this package does), let rollup bundle them into your dist file.\n */\n\n/* Core */\nimport * as _ from 'lodash';\n\nexport {\n  default as chart,\n} from './lib/chart';\n/*\nexport {\n  default as bars\n} from '../bars/bars.js';\n\nexport {\n  default as distro\n} from '../distro/distro.js';\n\nexport {\n  default as heatmap,\n} from '../heatmap/heatmap.js';\n*/\n\nexport {\n  default as layer,\n} from '../layer-scaffold/layer.js';\n\n/*\nexport {\n  default as leaflet,\n} from '../leaflet/leaflet.js';\n\nexport {\n  default as map,\n} from '../map/map.js';\n\nexport {\n  default as radar\n} from '../radar/radar.js';\n\nexport {\n  default as scatter,\n} from '../scatter/scatter.js';\n\nexport {\n  default as spineplot\n} from '../spineplot/spineplot.js';\n\nexport {\n  default as timeline,\n} from '../timeline/timeline.js';\n\nexport {\n  default as treemap,\n} from '../treemap/treemap.js';\n\n*/\n"],"names":["carto","query","config","callback","sql","cartodb","user","execute","done","data","result","rows","parser","map","error","vm","Helper","chart","_config","width","_width","height","_height","style","_addStyle","fullSvg","_fullSvg","svg","_svg","utils","d3","tip","generateScale","scale","domains","range","groupBy","d","column","stackBy","serie","undefined","type","minZero","Array","isArray","rangeRound","domain","padding","bins","format","value","formatPreffix","formatSuffix","wrap","text","tooltip","each","words","split","reverse","word","line","lineNumber","lineHeight","y","attr","dy","parseFloat","tspan","append","pop","push","join","node","getComputedTextLength","length","on","show","hide","i","slice","sortAscending","a","b","Number","isNaN","sortDescending","Chart","init","defaultConfig","size","margin","left","right","top","bottom","defaultStyle","backgroundColor","color","title","textColor","fontSize","fontWeight","textAlign","hr","enabled","borderWidth","borderColor","legend","position","figure","opacity","fontFamily","border","radius","yAxis","axis","strokeWidth","strokeColor","strokeOpacity","paddingTick","ticks","grid","gridDashed","labels","textAnchor","xAxis","_","_data","_margin","addStyle","_scales","_axes","layers","helper","bind","sizeObj","stylesObj","bool","bindTo","selector","Object","assign","legendType","legendTitle","layer","_layer","getLayer","layerIndex","draw","q","scales","loadData","awaitAll","results","initLayers","drawSVG","axes","drawAxes","drawLayers","events","load","dispatch","theme","x","buckets","setScales","tickSizeOuter","tickSize","values","tickValues","tickFormat","tsv","defer","json","csv","raw","mapData","topojson","url","plotOptions","bars","averageLines","forEach","l","ly","select","remove","html","template","classed","categories","c","hasOwnProperty","drawLegend","legendTip","name","call","legendBox","styles","lWidth","lbWidth","rx","ry","markStrokeWidth","o","legendCheck","selectAll","enter","onClickLegend","stopPropagation","coordinates","property","active","drawGrid","axesTip","element","dropdown","yAxisDropDown","updateAxis","getBoundingClientRect","display","transform","options","selected","console","log","_xAxis","xAxisDropDown","tickWidth","rotate","biggestLabelWidth","nodes","xBandWidth","bandwidth","stroke","keys","k","obj","change","getDomains","minMax","sorted","sortFunctionY","sortFunctionX","sort","order","destroy","Layer","create","_tip","direction","id","columnName","fill","Function","filter","sortBy","_quantiles","_setQuasecondntile","_minMax","colors","Math","abs","_getQuantileColor","quantiles","onmouseover","onmouseout","onclick","total","min","max","outOfRangeColor","colorsOnHover"],"mappings":"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"}